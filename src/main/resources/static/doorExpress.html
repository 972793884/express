<!DOCTYPE html>
<head>
    <title>Inputs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="keywords" content=""/>
    <script type="application/x-javascript"> addEventListener("load", function () {
        setTimeout(hideURLbar, 0);
    }, false);

    function hideURLbar() {
        window.scrollTo(0, 1);
    } </script>
    <!-- bootstrap-css -->
    <link rel="stylesheet" href="css/bootstrap.css">
    <!-- //bootstrap-css -->
    <!-- Custom CSS -->
    <link href="css/style.css" rel='stylesheet' type='text/css'/>
    <!-- font CSS -->
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic'
          rel='stylesheet' type='text/css'>
    <!-- font-awesome icons -->
    <link rel="stylesheet" href="css/font.css" type="text/css"/>
    <link href="css/font-awesome.css" rel="stylesheet">
    <link href="css/validationEngine.jquery.css" rel="stylesheet"/><!--表单验证插件样式-->
    <link href="css/bootstrap-datetimepicker.min.css" rel="stylesheet"/><!--时间选择插件样式-->
    <!-- //font-awesome icons -->
    <!--<script>
            (function () {
              var js;
              if (typeof JSON !== 'undefined' && 'querySelector' in document && 'addEventListener' in window) {
                js = 'http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js';
              } else {
                js = 'http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js';
              }
              document.write('<script src="' + js + '"><\/script>');
            }());
     </script>-->
    <script src="js/jquery.min.js"></script>
    <script src="js/modernizr.js"></script>
    <script src="js/jquery.cookie.js"></script>
    <script src="js/screenfull.js"></script>
    <script>
        $(function () {
            $('#supported').text('Supported/allowed: ' + !!screenfull.enabled);

            if (!screenfull.enabled) {
                return false;
            }


            $('#toggle').click(function () {
                screenfull.toggle($('#container')[0]);
            });
        });
    </script>

</head>
<body class="dashboard-page">
<nav class="main-menu">
    <ul>
        <li>
            <a href="index.html">
                <i class="fa fa-home nav_icon"></i>
                <span class="nav-text">
					首页
                </span>
            </a>
        </li>
        <li class="has-subnav loginMenu admin">
            <a href="javascript:;">
                <i class="fa fa-cogs" aria-hidden="true"></i>
                <span class="nav-text">
					用户管理
				</span>
                <i class="icon-angle-right"></i><i class="icon-angle-down"></i>
            </a>
            <ul>
                <li>
                    <a class="subnav-text" href="admin.html">
                        管理员
                    </a>
                </li>
                <li>
                    <a class="subnav-text" href="user.html">
                        快递员
                    </a>
                </li>
            </ul>
        </li>
        <li class="loginMenu">
            <a href="expressList.html">
                <i class="fa fa-bar-chart nav_icon"></i>
                <span class="nav-text">
						快件管理
					</span>
            </a>
        </li>
        <li class="loginMenu">
            <a href="expressOrder.html">
                <i class="icon-font nav-icon"></i>
                <span class="nav-text">
					订单管理
					</span>
            </a>
        </li>
        <li class="doorExpress">
            <a href="doorExpress.html">
                <i class="icon-table nav-icon"></i>
                <span class="nav-text">
					预约上门取件
					</span>
            </a>
        </li>
        <li>
            <a href="searchExpress.html">
                <i class="fa fa-map-marker" aria-hidden="true"></i>
                <span class="nav-text">
					快件查询
					</span>
            </a>
        </li>
        <li class="loginMenu">
            <a href="user_info.html">
                <i class="fa fa-check-square-o" style="position: relative;display: table-cell;width: 60px;text-align: center;vertical-align: middle;font-size: 18px;padding: .7em 0;" aria-hidden="true"></i>
                <span class="nav-text">
					个人信息
					</span>
            </a>
        </li>
        <li>
            <a href="contact_us.html">
                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                <span class="nav-text">
					联系我们
					</span>
            </a>
        </li>
    </ul>
</nav>
<section class="wrapper scrollable">
    <nav class="user-menu">
        <a href="javascript:;" class="main-menu-access">
            <i class="icon-proton-logo"></i>
            <i class="icon-reorder"></i>
        </a>
    </nav>
    <section class="title-bar">
        <div class="logo">
            <h1><a href="index.html"><img src="images/logo.png" alt=""/>校园快递</a></h1>
        </div>
        <div class="header-right">
            <div class="profile_details_left">
                <div class="profile_details">
                    <ul>
                        <li class="dropdown profile_details_drop">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                <div class="profile_img">
                                    <span class="prfil-img"><i class="fa fa-user" aria-hidden="true"></i></span>
                                    <div class="clearfix"></div>
                                </div>
                            </a>
                            <ul class="dropdown-menu drp-mnu ">
                                <li class="loginMenu"><a href="#" onclick="location.href='/logout'"><i class="fa fa-sign-out"></i> 退出</a>
                                </li>
                                <li class="login"><a href="#" onclick="location.href='/login.html'"><i class="fa fa-sign-out"></i> 登录</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <div class="clearfix"></div>
    </section>
    <div class="main-grid">
        <div class="agile-grids">
            <!-- input-forms -->
            <div class="grids">
                <div class="progressbar-heading grids-heading">
                    <h2>预约上门取件</h2>
                </div>
                <div class="panel panel-widget forms-panel">
                    <div class="forms">
                        <div class="form-grids widget-shadow" data-example-id="basic-forms">
                            <div class="form-title">
                                <h4>填写信息 :</h4>
                            </div>
                            <div class="form-body">
                                <form id="expressForm" action="/expressOrder/saveExpressOrder" method="post">
                                    <div class="form-group">
                                        <label>姓名</label>
                                        <input  type="text" name="userName" class="form-control validate[required]" placeholder="姓名"
                                               required>
                                    </div>
                                    <div class="form-group">
                                        <label>电话</label>
                                        <input type="email" name="phone" maxlength="11"  class="form-control validate[required,custom[mobile]]" placeholder="电话"
                                               required="required">
                                    </div>
                                    <div class="form-inline" style="margin-bottom: 15px">
                                        <label>取件地址</label>
                                        <div data-toggle="distpicker" id="distpicker">
                                            <div class="form-group" style="width: 30%">
                                               <!-- <label class="sr-only" for="province1">Province</label>-->
                                                <select id="province" class="form-control validate[required,custom[select]]" id="province1" name="province" style="width: 100%"></select>
                                            </div>
                                            <div class="form-group" style="width: 30%">
                                                <!--<label class="sr-only" for="city1">City</label>-->
                                                <select id="city" class="form-control validate[required,custom[select]]" id="city1" name="city" style="width: 100%"></select>
                                            </div>
                                            <div class="form-group" style="width: 39.4%">
                                                <!--<label class="sr-only" for="district1" >District</label>-->
                                                <select id="district" class="form-control validate[required,custom[select]]" id="district1" name="district" style="width: 100%" ></select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>详细地址</label>
                                        <input type="text"  value="" id="doorAdress"  class="form-control validate[required]" placeholder="详细地址-楼号-门牌号"
                                               required="required">
                                        <input type="hidden" name="doorAdress" >
                                    </div>
                                    <div class="form-group">
                                        <label>预约上门时间</label>
                                        <input id="doorTime" type="text" readonly value="" name="doorTime" class="form-control validate[required]" placeholder="预约时间"
                                               required="required">
                                    </div>
                                    <div class="form-group">
                                        <label>备注</label>
                                        <input type="text" name="content" class="form-control validate[required]" placeholder="备注"
                                               required="required">
                                    </div>
                                    <!--<div class="checkbox">
                                        <label> <input type="checkbox"> Check me out </label>
                                    </div> -->
                                    <button type="button" onclick="saveExpressOrder()" class="btn btn-default w3ls-button">提交</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- //input-forms -->
        </div>
    </div>
    <!-- footer -->
    <!--<div class="footer">
        <p>Copyright &copy; 2016.Company name All rights reserved.More Templates <a href="http://www.cssmoban.com/" target="_blank" title="模板之家">模板之家</a> - Collect from <a href="http://www.cssmoban.com/" title="网页模板" target="_blank">网页模板</a></p>
    </div>-->
    <!-- //footer -->
</section>
<script src="js/bootstrap.js"></script>
<script src="js/proton.js"></script>
<script src="js/jquery-form.js"></script><!--ajaxSubmit插件-->
<script src="js/layer.js"></script><!--弹窗插件-->
<script src="js/jquery.validationEngine.js"></script><!--表单验证插件-->
<script src="js/jquery.validationEngine-zh_CN.js"></script>
<script src="js/bootstrap-datetimepicker.min.js"></script><!--时间选择插件-->
<script src="js/bootstrap-datetimepicker.zh-CN.js"></script>
<script src="js/distpicker.data.js"></script><!--省市区三级-->
<script src="js/distpicker.js"></script>
<script src="js/main.js"></script>
<script src="js/vue.js"></script>
<script src="js/page.js"></script>
<script>

    $(function(){
        isLogin();
        $('#distpicker').distpicker('reset', true);
        $('#doorTime').datetimepicker({
            language:'zh-CN',
            startDate:new Date(),
            autoclose:true,
            format:'yyyy-mm-dd hh:ii:ss'
        });
        $("#expressForm").validationEngine('attach', {
            relative: true,
            scroll:true,
            custom_error_messages:{
                required:{
                    message:'这里不能是空的啦'
                }
            },
            overflownDIV: "#divPostion",
            promptPosition: "bottomRight" //验证弹出框的位置，topRight,topLeft,bottomRight,bottomLeft,centerRight,centerLeft,inline
        });
    });
    function saveExpressOrder() {
        /*alert( $("#expressForm").validationEngine('validate') );*/
       if (!$("#expressForm").validationEngine('validate'))
           return
        $("input[name='doorAdress']").val($("#province").val()+$("#city").val()+$("#district").val()+"-"+$("#doorAdress").val())
        $("#expressForm").ajaxSubmit({
            dataType: "json",
            async: false,
            beforeSubmit: function (formData, jqForm, options) {
                tipIndex = parent.layer.load(1, {
                    shade: 0.01
                });
            },
            success: function (ret) {
                if (ret.state == "ok") {
                    parent.layer.msg("success", {
                        time: 3000,
                    })

                } else {
                    layer.msg("failed", {
                        time: 3000,
                    })
                }

            },
            complete: function (ret) {
                parent.layer.close(tipIndex);
            }
        })
    }
</script>
</body>
</html>

<!DOCTYPE html>
<head>
    <title>Tables</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="keywords" content=""/>
    <script type="application/x-javascript"> addEventListener("load", function () {
        setTimeout(hideURLbar, 0);
    }, false);

    function hideURLbar() {
        window.scrollTo(0, 1);
    } </script>
    <!-- bootstrap-css -->
    <link rel="stylesheet" href="css/bootstrap.css">
    <!-- //bootstrap-css -->
    <!-- Custom CSS -->
    <link href="css/style.css" rel='stylesheet' type='text/css'/>
    <!-- font CSS -->
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic'
          rel='stylesheet' type='text/css'>
    <!-- font-awesome icons -->
    <link rel="stylesheet" href="css/font.css" type="text/css"/>
    <link href="css/font-awesome.css" rel="stylesheet">
    <!-- //font-awesome icons -->
    <!-- <script>
         (function () {
             var js;
             if (typeof JSON !== 'undefined' && 'querySelector' in document && 'addEventListener' in window) {
                 js = 'http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js';
             } else {
                 js = 'http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js';
             }
             document.write('<script src="' + js + '"><\/script>');
         }());
     </script>-->
    <script src="js/jquery.min.js"></script>
    <script src="js/modernizr.js"></script>
    <script src="js/jquery.cookie.js"></script>
    <script src="js/screenfull.js"></script>
    <script>
        $(function () {
            $('#supported').text('Supported/allowed: ' + !!screenfull.enabled);

            if (!screenfull.enabled) {
                return false;
            }

            $('#toggle').click(function () {
                screenfull.toggle($('#container')[0]);
            });
        });
    </script>
    <!-- tables -->
    <link rel="stylesheet" type="text/css" href="css/table-style.css"/>
    <link rel="stylesheet" type="text/css" href="css/basictable.css"/>
    <script type="text/javascript" src="js/jquery.basictable.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#table').basictable();
        });
    </script>
    <!-- //tables -->
</head>
<body class="dashboard-page">

<nav class="main-menu">
    <ul>
        <li>
            <a href="index.html">
                <i class="fa fa-home nav_icon"></i>
                <span class="nav-text">
					首页
                </span>
            </a>
        </li>
        <li class="has-subnav loginMenu admin">
            <a href="javascript:;">
                <i class="fa fa-cogs" aria-hidden="true"></i>
                <span class="nav-text">
					用户管理
				</span>
                <i class="icon-angle-right"></i><i class="icon-angle-down"></i>
            </a>
            <ul>
                <li>
                    <a class="subnav-text" href="admin.html">
                        管理员
                    </a>
                </li>
                <li>
                    <a class="subnav-text" href="user.html">
                        快递员
                    </a>
                </li>
            </ul>
        </li>
        <li class="loginMenu role">
            <a href="expressList.html">
                <i class="fa fa-bar-chart nav_icon"></i>
                <span class="nav-text">
						快件管理
					</span>
            </a>
        </li>
        <li class="loginMenu role">
            <a href="expressOrder.html">
                <i class="icon-font nav-icon"></i>
                <span class="nav-text">
					订单管理
					</span>
            </a>
        </li>
        <li class="doorExpress">
            <a href="doorExpress.html">
                <i class="icon-table nav-icon"></i>
                <span class="nav-text">
					预约上门取件
					</span>
            </a>
        </li>
        <li class="role">
            <a href="searchExpress.html">
                <i class="fa fa-map-marker" aria-hidden="true"></i>
                <span class="nav-text">
					快件查询
					</span>
            </a>
        </li>
        <li class="loginMenu">
            <a href="user_info.html">
                <i class="fa fa-check-square-o" style="position: relative;display: table-cell;width: 60px;text-align: center;vertical-align: middle;font-size: 18px;padding: .7em 0;" aria-hidden="true"></i>
                <span class="nav-text">
					个人信息
					</span>
            </a>
        </li>
        <li>
            <a href="contact_us.html">
                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                <span class="nav-text">
					联系我们
					</span>
            </a>
        </li>
    </ul>
</nav>
<section class="wrapper scrollable">
    <nav class="user-menu">
        <a href="javascript:;" class="main-menu-access">
            <i class="icon-proton-logo"></i>
            <i class="icon-reorder"></i>
        </a>
    </nav>
    <section class="title-bar">
        <div class="logo">
            <h1><a href="index.html"><img src="images/logo.png" alt=""/>校园快递</a></h1>
        </div>
        <div class="header-right">
            <div class="profile_details_left">
                <div class="profile_details">
                    <ul>
                        <li class="dropdown profile_details_drop">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                <div class="profile_img">
                                    <span class="prfil-img"><i class="fa fa-user" aria-hidden="true"></i></span>
                                    <div class="clearfix"></div>
                                </div>
                            </a>
                            <ul class="dropdown-menu drp-mnu ">
                                <li class="loginMenu"><a href="#" onclick="location.href='/logout'"><i class="fa fa-sign-out"></i> 退出</a>
                                </li>
                                <li class="login"><a href="#" onclick="location.href='/login.html'"><i class="fa fa-sign-out"></i> 登录</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
        <div class="clearfix"></div>
    </section>
    <div class="main-grid" id="app">
        <div class="agile-grids">
            <!-- tables -->

            <!--<div class="table-heading">
                <h2>管理员</h2>
            </div>-->
            <div class="agile-tables">
                <div class="w3l-table-info">
                    <h3>快递员列表</h3>
                    <!--<div style="float: left;padding: 10px">
                        <button style="width: 100%" type="button" class="btn btn-lg btn-primary btn-block">添加+</button>
                    </div>-->

                    <table id="table">
                        <thead>
                        <tr>
                            <th>姓名</th>
                            <th>电话</th>
                            <th>登录时间</th>
                            <th>上次登陆时间</th>
                            <th>注册时间</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr v-for="item in list">
                            <td>{{item.name}}</td>
                            <td>{{item.phone}}</td>
                            <td>{{item.thisLoginTime}}</td>
                            <td>{{item.lastLoginTime}}</td>
                            <td>{{item.signInTime}}</td>
                            <td>
                                <div style="float: left;padding: 2px">
                                    <button style="width: 100%" @click="update(item.id)" type="button" class="btn btn-lg btn-primary btn-block">
                                        修改
                                    </button>
                                </div>
                                <div style="float: left;padding: 2px">
                                    <button style="width: 100%;" @click="del(item.id)" type="button" class="btn btn-lg btn-danger btn-block">
                                        删除
                                    </button>
                                </div>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <div id="pagination" style="text-align: center;margin-top: 50px">
                    </div>


                </div>
                <!-- //tables -->
            </div>
        </div>
</section>
<script src="js/bootstrap.js"></script>
<script src="js/proton.js"></script>
<script type="text/javascript" src="js/jqPaginator.js"></script>
<script src="js/vue.js"></script>
<script src="js/page.js"></script>
<script src="js/layer.js"></script>
<script type="text/javascript">
    var vm = new Vue({
        el: "#app",
        data: {
            list: '',
            data:'',
            id:''
        },
        mounted: function () {
            this.getmodel();
            isLogin()
        },
        methods: {
            getmodel: function (page) {
                $.ajax({
                    url: "/user/getUserList",
                    type: "GET",
                    data: {},
                    dataType: "json",
                    success: function (data) {
                        vm.data=data
                        build(vm.data,7,5)
                    },
                    complete:function () {
                    }
                });

            },
            update:function (id) {
                this.id=id
                layer.open({
                    type: 2,
                    title: '修改信息',
                    maxmin: true,
                    shadeClose: true, //点击遮罩关闭层
                    area: ['80%', '80%'],
                    content: 'user_update.html'
                });
            },
            del:function (id) {
                layer.confirm('确该删除用户信息吗？', {
                    btn: ['确定', '取消'] //按钮
                }, function () {
                    $.ajax({
                        url: "/user/delUser",
                        type: "GET",
                        data: {
                            id:id,
                        },
                        dataType: "json",
                        success: function (data) {
                            if (data.state == 'ok') {
                                layer.msg('用户删除成功', {icon: 6});
                                vm.getmodel()
                            } else {
                                layer.msg('用户删除失败!', {icon: 9});
                            }
                        }
                    });

                }, function () {
                    layer.msg('取消用户删除!', {icon: 9});
                    /*layer.msg('也可以这样', {
                        time: 20000, //20s后自动关闭
                        btn: ['明白了', '知道了']
                    });*/
                });
            }
        }
    });

</script>
</body>
</html>
